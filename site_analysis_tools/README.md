# 🌐 أداة تحليل المواقع ولقطات الشاشة الشاملة
# Complete Website Analysis and Screenshot Tool

أداة شاملة ومتقدمة لتحليل المواقع الإلكترونية وأخذ لقطات شاشة عالية الجودة، مطورة خصيصاً لتحليل موقع AKWAM مع دعم كامل للغة العربية.

## ✨ الميزات الرئيسية

### 📸 لقطات الشاشة
- أخذ لقطات شاشة بصيغة PNG عالية الجودة
- لقطات للصفحة كاملة ولقطات للجزء المرئي
- دعم أحجام شاشة متعددة (سطح المكتب والموبايل)
- تحسين جودة وحجم الصور تلقائياً

### 🔍 تحليل المحتوى
- استخراج جميع البيانات الوصفية (Meta Tags)
- تحليل هيكل الصفحة والعناوين
- كشف أنظمة إدارة المحتوى (CMS Detection)
- فحص الروابط المعطلة
- استخراج وتحليل النماذج والجداول

### 💾 حفظ الأصول
- تحميل وحفظ جميع الصور والملفات
- تنظيم الملفات حسب النوع (صور، CSS، JS، إلخ)
- حفظ صفحات HTML كاملة
- إنشاء نسخ احتياطية محلية شاملة

### 📊 التقارير والإحصائيات
- تقارير JSON مفصلة
- تقارير نصية مبسطة
- إحصائيات شاملة للأداء
- تتبع الأخطاء والمشاكل

### 🗺️ خرائط المواقع
- إنشاء خرائط مواقع XML تلقائياً
- دعم معايير Sitemap Protocol
- إضافة تواريخ التعديل والأولويات

## 📋 متطلبات التشغيل

### المكتبات المطلوبة
```bash
pip install playwright beautifulsoup4 fake-useragent nest-asyncio aiofiles pillow requests lxml trafilatura
playwright install chromium
```

### الملفات المطلوبة
- `روابط_AKWAM_ترتيب_هرمي_شامل.txt` - ملف يحتوي على روابط الموقع للتحليل

## 🚀 طرق التشغيل

### الطريقة الأولى: التشغيل التفاعلي
```bash
cd site_analysis_tools
python run_analysis.py
```

### الطريقة الثانية: التشغيل المباشر
```bash
cd site_analysis_tools
python screenshot_website.py
```

### الطريقة الثالثة: الأداة البسيطة (بدون Playwright)
```bash
cd site_analysis_tools
python simple_screenshot_tool.py
```

## ⚙️ إعدادات التحليل

يمكن تخصيص الإعدادات عبر تعديل فئة `ScreenshotConfig` في الملف:

```python
class ScreenshotConfig:
    def __init__(self):
        # إعدادات أساسية
        self.base_url = "https://ak.sv/"
        self.output_root = "site_analysis_complete"
        self.links_file = "روابط_AKWAM_ترتيب_هرمي_شامل.txt"
        
        # إعدادات التحليل
        self.max_pages = 100        # الحد الأقصى للصفحات
        self.max_depth = 2          # عمق التحليل
        self.screenshot_delay = 2   # تأخير قبل أخذ لقطة الشاشة
        
        # إعدادات لقطة الشاشة
        self.viewport_width = 1920
        self.viewport_height = 1080
        self.screenshot_quality = 90
```

## 📁 هيكل المخرجات

```
site_analysis_complete/
├── html_pages/              # صفحات HTML محفوظة
├── assets/                  # الأصول المحملة
│   ├── images/             # الصور
│   ├── css/               # ملفات CSS
│   ├── js/                # ملفات JavaScript
│   ├── fonts/             # الخطوط
│   └── others/            # ملفات أخرى
├── reports/                # التقارير والإحصائيات
│   ├── comprehensive_report.json
│   └── summary_report.txt
├── sitemap.xml            # خريطة الموقع
└── [page_folders]/        # مجلدات الصفحات الفردية
    ├── screenshots/       # لقطات الشاشة
    ├── index.html        # محتوى HTML
    ├── meta_info.json    # البيانات الوصفية
    ├── cms_info.json     # معلومات CMS
    ├── page_summary.json # ملخص الصفحة
    └── assets_info.json  # معلومات الأصول
```

## 📊 أمثلة على التقارير

### تقرير شامل JSON
```json
{
  "تقرير_التحليل_الشامل": {
    "معلومات_عامة": {
      "الموقع_المستهدف": "https://ak.sv/",
      "وقت_البدء": "2025-01-01T10:00:00",
      "مدة_التحليل_بالدقائق": 15.5
    },
    "إحصائيات_الصفحات": {
      "إجمالي_الصفحات_المعالجة": 50,
      "الروابط_من_الملف": 18114,
      "لقطات_شاشة_ناجحة": 48
    }
  }
}
```

### تقرير نصي مبسط
```
═══════════════════════════════════════
📊 إحصائيات عامة:
✅ الصفحات المعالجة بنجاح: 50
📄 الروابط من الملف: 18114
📸 لقطات الشاشة الناجحة: 48
⏱️ مدة التحليل: 15.5 دقيقة
═══════════════════════════════════════
```

## 🛠️ استكشاف الأخطاء وإصلاحها

### مشاكل شائعة وحلولها

#### خطأ: "No such file or directory"
```bash
# تأكد من وجود ملف الروابط
ls -la روابط_AKWAM_ترتيب_هرمي_شامل.txt
```

#### خطأ: "playwright not found"
```bash
# تثبيت Playwright
pip install playwright
playwright install chromium
```

#### خطأ: "Permission denied"
```bash
# إعطاء صلاحيات التشغيل
chmod +x screenshot_website.py
chmod +x run_analysis.py
```

#### مشاكل الذاكرة
- قلل عدد الصفحات القصوى (`max_pages`)
- قلل عمق التحليل (`max_depth`)
- أوقف حفظ الأصول مؤقتاً

## 🔧 التطوير والتخصيص

### إضافة ميزات جديدة
1. اعدل فئة `ScreenshotConfig` للإعدادات الجديدة
2. أضف وظائف التحليل في القسم المناسب
3. حدث وظيفة `crawl()` لاستخدام الميزات الجديدة

### تخصيص التقارير
اعدل وظيفة `generate_comprehensive_report()` لإضافة إحصائيات جديدة.

### دعم مواقع أخرى
1. غير `base_url` في الإعدادات
2. حدث نمط استخراج الروابط في `load_links_from_file()`
3. اعدل معايير كشف CMS حسب الحاجة

## 📝 سجل الأخطاء

جميع الأخطاء والأحداث يتم تسجيلها في:
- `screenshot_log.txt` - سجل تفصيلي
- الشاشة - رسائل مهمة فقط

## 🤝 المساهمة

1. Fork المشروع
2. أنشئ branch جديد للميزة
3. اعمل التعديلات مع التوثيق
4. اختبر التغييرات
5. أرسل Pull Request

## 📄 الترخيص

هذا المشروع مجاني للاستخدام الشخصي والتعليمي. للاستخدام التجاري، يرجى التواصل مع المطور.

## ⚠️ تنبيهات مهمة

- احترم شروط استخدام المواقع المستهدفة
- لا تفرط في عدد الطلبات لتجنب حظر IP
- احفظ نسخ احتياطية من إعداداتك
- راقب استهلاك البيانات والمساحة

## 📞 الدعم والتواصل

للمساعدة والدعم:
- افتح Issue في GitHub
- راجع ملف troubleshooting
- اطلع على الأمثلة في المجلد

---

🌟 **نصيحة:** ابدأ بتحليل عدد قليل من الصفحات أولاً لاختبار الإعدادات، ثم زد العدد تدريجياً حسب احتياجاتك.