"use strict";(()=>{var e={};e.id=405,e.ids=[405],e.modules={1496:(e,t,i)=>{i.a(e,async(e,s)=>{try{i.r(t),i.d(t,{config:()=>p,default:()=>d,getServerSideProps:()=>m,getStaticPaths:()=>g,getStaticProps:()=>u,reportWebVitals:()=>f,routeModule:()=>w,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>x,unstable_getStaticPaths:()=>_,unstable_getStaticProps:()=>v});var r=i(7093),a=i(5244),o=i(1323),c=i(1207),n=i(5913),l=i(2627),h=e([l]);l=(h.then?(await h)():h)[0];let d=(0,o.l)(l,"default"),u=(0,o.l)(l,"getStaticProps"),g=(0,o.l)(l,"getStaticPaths"),m=(0,o.l)(l,"getServerSideProps"),p=(0,o.l)(l,"config"),f=(0,o.l)(l,"reportWebVitals"),v=(0,o.l)(l,"unstable_getStaticProps"),_=(0,o.l)(l,"unstable_getStaticPaths"),x=(0,o.l)(l,"unstable_getStaticParams"),y=(0,o.l)(l,"unstable_getServerProps"),S=(0,o.l)(l,"unstable_getServerSideProps"),w=new r.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:n.default,Document:c.default},userland:l});s()}catch(e){s(e)}})},1346:(e,t,i)=>{i.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var s=i(997),r=i(6689),a=i.n(r),o=i(7925);let __WEBPACK_DEFAULT_EXPORT__=({showControls:e=!1})=>{let[t,i]=(0,r.useState)(null),[c,n]=(0,r.useState)(!1),[l,h]=(0,r.useState)(""),d=(0,o.Bd)();if(!o.Xh.cache.showControls)return null;let getCacheInfo=async()=>{try{let e=await fetch("/api/cache/refresh"),t=await e.json();i(t.cacheInfo)}catch(e){console.error("خطأ في جلب معلومات الكاش:",e)}},refreshCache=async()=>{n(!0),h("");try{let e=await fetch("/api/cache/refresh",{method:"POST"}),t=await e.json();t.success?(h("✅ تم تحديث البيانات بنجاح"),i(t.cacheInfo),setTimeout(()=>{window.location.reload()},2e3)):h("❌ فشل في تحديث البيانات")}catch(e){h("❌ حدث خطأ أثناء التحديث"),console.error("Error refreshing cache:",e)}finally{n(!1)}},clearCache=async()=>{if(confirm("هل أنت متأكد من مسح جميع ملفات الكاش؟")){n(!0),h("");try{let e=await fetch("/api/cache/refresh",{method:"DELETE"}),t=await e.json();t.success?(h("\uD83D\uDDD1 تم مسح الكاش بنجاح"),i({totalFiles:0,totalSize:"0 KB"})):h("❌ فشل في مسح الكاش")}catch(e){h("❌ حدث خطأ أثناء مسح الكاش"),console.error("Error clearing cache:",e)}finally{n(!1)}}};return(a().useEffect(()=>{e&&getCacheInfo()},[e]),e)?(0,s.jsxs)("div",{className:"fixed bottom-4 right-4 bg-gray-900 text-white p-4 rounded-lg shadow-lg z-50 min-w-[300px]",children:[s.jsx("h3",{className:"text-lg font-bold mb-2",children:"\uD83D\uDE80 أدوات التخزين المؤقت"}),s.jsx("p",{className:"text-xs text-green-400 mb-3",children:d.message}),t&&(0,s.jsxs)("div",{className:"mb-3 text-sm",children:[(0,s.jsxs)("p",{children:["\uD83D\uDCC1 ملفات الكاش: ",t.totalFiles]}),(0,s.jsxs)("p",{children:["\uD83D\uDCBE الحجم: ",t.totalSize]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[s.jsx("button",{onClick:refreshCache,disabled:c,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 px-3 py-2 rounded text-sm transition-colors",children:c?"⏳ جاري التحديث...":"\uD83D\uDD04 تحديث البيانات"}),s.jsx("button",{onClick:clearCache,disabled:c,className:"bg-red-600 hover:bg-red-700 disabled:bg-gray-600 px-3 py-2 rounded text-sm transition-colors",children:"\uD83D\uDDD1 مسح الكاش"}),s.jsx("button",{onClick:getCacheInfo,disabled:c,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 px-3 py-2 rounded text-sm transition-colors",children:"ℹ️ معلومات الكاش"})]}),l&&s.jsx("div",{className:"mt-3 p-2 bg-gray-800 rounded text-sm",children:l})]}):null}},4745:(e,t,i)=>{i.a(e,async(e,s)=>{try{i.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var r=i(997),a=i(6689),o=i(2463),c=i(9616),n=i(376),l=i(2437),h=i(1346),d=e([c]);c=(d.then?(await d)():d)[0];let __WEBPACK_DEFAULT_EXPORT__=function({netflixOriginals:e,trendingNow:t,topRated:i,actionMovies:s,comedyMovies:d,horrorMovies:u,romanceMovies:g,documentaries:m,session:p}){let[f,v]=(0,a.useState)(""),[_,x]=(0,a.useState)([]),fetchData=async e=>{let t=await fetch(`https://api.themoviedb.org/3/search/multi?api_key=${process.env.TMDB_API_KEY}&language=en-US&query=${e}&page=1&include_adult=false`).then(e=>e.json());x(t.results)};return(0,a.useEffect)(()=>{f&&fetchData(f.toLowerCase())},[f]),(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.Z,{isSearch:!0,setSearchTerm:v,searchThrem:f}),f?r.jsx("main",{className:"pl-4 pb-4 lg:space-y-24",children:r.jsx("section",{className:"md:space-y-16 pt-36 pb-4 mb-4",children:r.jsx(l.Z,{movies:_,isDetails:!0,type:"movie",isSearch:!0})})}):(0,r.jsxs)("main",{className:"relative pl-4 pb-24 lg:space-y-24",children:[r.jsx(c.Z,{netflixOriginals:e,session:p,isTv:!1}),(0,r.jsxs)("section",{className:"md:space-y-16",children:[r.jsx(l.Z,{title:"Trending Now",movies:t,isDetails:!1,type:"movie"}),r.jsx(l.Z,{title:"Top Rated",movies:i,isDetails:!1,type:"movie"}),r.jsx(l.Z,{title:"Action Thrillers",movies:s,isDetails:!1,type:"movie"}),r.jsx(l.Z,{title:"Comedies",movies:d,isDetails:!1,type:"movie"}),r.jsx(l.Z,{title:"Scary Movies",movies:u,isDetails:!1,type:"movie"}),r.jsx(l.Z,{title:"Romance Movies",movies:g,isDetails:!1,type:"movie"}),r.jsx(l.Z,{title:"Documentaries",movies:m,isDetails:!1,type:"movie"})]})]}),r.jsx(o.Z,{}),r.jsx(h.Z,{showControls:!0})]})};s()}catch(e){s(e)}})},2627:(e,t,i)=>{i.a(e,async(e,s)=>{try{i.r(t),i.d(t,{default:()=>Home,getServerSideProps:()=>getServerSideProps});var r=i(997),a=i(939),o=i(1649),c=i(968),n=i.n(c),l=i(4745),h=i(9971),d=e([l]);function Home({netflixOriginals:e,trendingNow:t,topRated:i,actionMovies:s,comedyMovies:c,horrorMovies:h,romanceMovies:d,documentaries:u}){return(0,o.useSession)(),(0,r.jsxs)(a.E.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},children:[(0,r.jsxs)(n(),{children:[r.jsx("title",{children:"Netflix Clone"}),r.jsx("meta",{name:"description",content:"Generated by create next app"}),r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.jsx("link",{rel:"icon",href:"https://www.designbust.com/download/1037/png/netflix_logo_png_transparet512.png"})]}),r.jsx(l.Z,{netflixOriginals:e,trendingNow:t,topRated:i,actionMovies:s,comedyMovies:c,horrorMovies:h,romanceMovies:d,documentaries:u,session:null})]})}l=(d.then?(await d)():d)[0];let getServerSideProps=async e=>{try{await (0,o.getSession)(e);let[t,i,s,r,a,c,n,l]=await Promise.all([h.ZP.fetchNetflixOriginals().catch(()=>({results:[]})),h.ZP.fetchTrending().catch(()=>({results:[]})),h.ZP.fetchTopRated().catch(()=>({results:[]})),h.ZP.fetchActionMovies().catch(()=>({results:[]})),h.ZP.fetchComedyMovies().catch(()=>({results:[]})),h.ZP.fetchHorrorMovies().catch(()=>({results:[]})),h.ZP.fetchRomanceMovies().catch(()=>({results:[]})),h.ZP.fetchDocumentaries().catch(()=>({results:[]}))]);return{props:{netflixOriginals:t?.results||[],trendingNow:i?.results||[],topRated:s?.results||[],actionMovies:r?.results||[],comedyMovies:a?.results||[],horrorMovies:c?.results||[],romanceMovies:n?.results||[],documentaries:l?.results||[]}}}catch(e){return console.error("Error fetching data:",e),{props:{netflixOriginals:[],trendingNow:[],topRated:[],actionMovies:[],comedyMovies:[],horrorMovies:[],romanceMovies:[],documentaries:[]}}}};s()}catch(e){s(e)}})},9971:(e,t,i)=>{i.d(t,{ZP:()=>u});var s=i(7147),r=i.n(s),a=i(1017),o=i.n(a),c=i(7925);let n=new class{constructor(){this.cacheDir=o().join(process.cwd(),"cache"),this.ensureCacheDirectory()}ensureCacheDirectory(){r().existsSync(this.cacheDir)||r().mkdirSync(this.cacheDir,{recursive:!0})}getCacheFilePath(e){let t=e.replace(/[^a-zA-Z0-9-_]/g,"_");return o().join(this.cacheDir,`${t}.json`)}set(e,t,i=c.Xh.cache.duration){if(!c.Xh.cache.enabled)return;let s={data:t,timestamp:Date.now(),expiresIn:i},a=this.getCacheFilePath(e);try{r().writeFileSync(a,JSON.stringify(s,null,2))}catch(t){console.error(`خطأ في حفظ الكاش لـ ${e}:`,t)}}get(e){if(!c.Xh.cache.enabled)return null;let t=this.getCacheFilePath(e);if(!r().existsSync(t))return null;try{let i=r().readFileSync(t,"utf8"),s=JSON.parse(i);if(s.expiresIn!==1/0&&Date.now()-s.timestamp>s.expiresIn)return this.delete(e),null;return s.data}catch(t){return console.error(`خطأ في قراءة الكاش لـ ${e}:`,t),null}}has(e){return null!==this.get(e)}delete(e){let t=this.getCacheFilePath(e);r().existsSync(t)&&r().unlinkSync(t)}clear(){if(r().existsSync(this.cacheDir)){let e=r().readdirSync(this.cacheDir);e.forEach(e=>{r().unlinkSync(o().join(this.cacheDir,e))})}}getInfo(){if(!r().existsSync(this.cacheDir))return{totalFiles:0,totalSize:0};let e=r().readdirSync(this.cacheDir),t=0;return e.forEach(e=>{let i=o().join(this.cacheDir,e),s=r().statSync(i);t+=s.size}),{totalFiles:e.length,totalSize:Math.round(t/1024)}}},l=process.env.TMDB_API_KEY,h="https://api.themoviedb.org/3",d=c.Xh.cache.duration;async function fetchWithCache(e,t,i={}){let{useCache:s=!0,cacheDuration:r=d,forceRefresh:a=!1}=i;if(!a&&s&&c.Xh.cache.enabled){let e=n.get(t);if(e)return e}try{let i=await fetch(e);if(!i.ok)throw Error(`HTTP error! status: ${i.status}`);let a=await i.json();return s&&c.Xh.cache.enabled&&n.set(t,a,r),a}catch(e){if(console.error(`خطأ في جلب البيانات لـ ${t}:`,e),c.Xh.cache.enabled){let e=n.get(t);if(e)return e}throw e}}let u={fetchTrending:()=>fetchWithCache(`${h}/trending/all/week?api_key=${l}&language=en-US`,"trending_movies"),fetchNetflixOriginals:()=>fetchWithCache(`${h}/discover/movie?api_key=${l}&with_networks=213`,"netflix_originals"),fetchTopRated:()=>fetchWithCache(`${h}/movie/top_rated?api_key=${l}&language=en-US`,"top_rated_movies"),fetchActionMovies:()=>fetchWithCache(`${h}/discover/movie?api_key=${l}&language=en-US&with_genres=28`,"action_movies"),fetchComedyMovies:()=>fetchWithCache(`${h}/discover/movie?api_key=${l}&language=en-US&with_genres=35`,"comedy_movies"),fetchHorrorMovies:()=>fetchWithCache(`${h}/discover/movie?api_key=${l}&language=en-US&with_genres=27`,"horror_movies"),fetchRomanceMovies:()=>fetchWithCache(`${h}/discover/movie?api_key=${l}&language=en-US&with_genres=10749`,"romance_movies"),fetchDocumentaries:()=>fetchWithCache(`${h}/discover/movie?api_key=${l}&language=en-US&with_genres=99`,"documentaries"),searchMovie:e=>fetchWithCache(`${h}/search/movie?api_key=${l}&query=${encodeURIComponent(e)}`,`search_${e.replace(/\s+/g,"_").toLowerCase()}`),getMovieDetails:e=>fetchWithCache(`${h}/movie/${e}?api_key=${l}&language=en-US`,`movie_details_${e}`),refreshData:async()=>{let e=[fetchWithCache(`${h}/trending/all/week?api_key=${l}&language=en-US`,"trending_movies",{forceRefresh:!0}),fetchWithCache(`${h}/discover/movie?api_key=${l}&with_networks=213`,"netflix_originals",{forceRefresh:!0}),fetchWithCache(`${h}/movie/top_rated?api_key=${l}&language=en-US`,"top_rated_movies",{forceRefresh:!0}),fetchWithCache(`${h}/discover/movie?api_key=${l}&language=en-US&with_genres=28`,"action_movies",{forceRefresh:!0}),fetchWithCache(`${h}/discover/movie?api_key=${l}&language=en-US&with_genres=35`,"comedy_movies",{forceRefresh:!0}),fetchWithCache(`${h}/discover/movie?api_key=${l}&language=en-US&with_genres=27`,"horror_movies",{forceRefresh:!0}),fetchWithCache(`${h}/discover/movie?api_key=${l}&language=en-US&with_genres=10749`,"romance_movies",{forceRefresh:!0}),fetchWithCache(`${h}/discover/movie?api_key=${l}&language=en-US&with_genres=99`,"documentaries",{forceRefresh:!0})];await Promise.all(e)}}},7925:(e,t,i)=>{i.d(t,{Bd:()=>getEnvironmentConfig,Xh:()=>s});let s={cache:{enabled:!1,duration:18e5,showControls:!1},performance:{enableOptimizations:!1,skipConsoleRemoval:!1,enableSourceMaps:!1},network:{preferOffline:!1,skipAudit:!1,showProgress:!0}},getEnvironmentConfig=()=>({cacheStrategy:"normal",optimizationsEnabled:!1,debugMode:!1,message:"\uD83C\uDF1F وضع الإنتاج: أداء مُحسّن"})},3033:e=>{e.exports=require("hey-listen")},1649:e=>{e.exports=require("next-auth/react")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},3745:e=>{e.exports=import("firebase/app")},1492:e=>{e.exports=import("firebase/firestore")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),i=t.X(0,[859,130,908,516,201,649,675,267,40,176,616],()=>__webpack_exec__(1496));module.exports=i})();