# نسخة نتفليكس - ملف التوثيق

## نظرة عامة

هذا تطبيق حديث يحاكي نتفليكس مبني بتقنية Next.js 13 و TypeScript و Tailwind CSS. يوفر التطبيق تصفح الأفلام، المصادقة عبر جوجل باستخدام NextAuth.js، إدارة قائمة المشاهدة، معلومات تفصيلية عن الأفلام، وميزات شاملة مثل معلومات الممثلين وتصفح المواسم باستخدام TMDB API.

## تفضيلات المستخدم

أسلوب التواصل المفضل: لغة بسيطة ومفهومة بالعربية
لغة المستخدم: العربية (جميع المحادثات يجب أن تكون بالعربية)
متطلبات التواصل: جميع التفاعلات يجب أن تتم باللغة العربية بالكامل

## هيكل النظام

### هيكل الواجهة الأمامية

التطبيق مبني باستخدام **Next.js 13** مع:
- **العرض من جانب الخادم (SSR)** للأداء الأمثل وتحسين محركات البحث
- **TypeScript** لضمان الأمان والحصول على تجربة تطوير أفضل
- **Tailwind CSS** للتصميم العصري والمتجاوب
- **Framer Motion** للحركات والانتقالات السلسة

### نظام المصادقة

يستخدم **NextAuth.js v4** مع:
- مزود Google OAuth لمصادقة المستخدمين
- إدارة الجلسات عبر التطبيق
- المسارات المحمية وإدارة حالة المستخدم

### هيكل الخلفية

التطبيق يستفيد من **مسارات Next.js API** من أجل:
- جلب البيانات من جانب الخادم باستخدام `getServerSideProps`
- التكامل المباشر مع TMDB API لبيانات الأفلام
- التعامل مع مصادقة المستخدمين عبر NextAuth.js
- إدارة الجلسات ومنطق المسارات المحمية

### إدارة البيانات

- **تكامل TMDB API**: جلب مباشر من جانب الخادم لبيانات الأفلام والمحتوى الرائج والأنواع والمعلومات التفصيلية
- **إدارة الحالة من جانب العميل**: React hooks والسياق لتفضيلات المستخدم وحالة واجهة المستخدم
- **تكامل Firebase**: تكامل اختياري لاستمرارية بيانات المستخدم والميزات المتقدمة

## المكونات الرئيسية

### الصفحات والمكونات الأساسية

- **الصفحة الرئيسية**: معروضة من جانب الخادم مع جلب بيانات الأفلام
- **مكون الصفحة الرئيسية**: لوحة التحكم الرئيسية مع صفوف الأفلام والقسم البطولي
- **مكون تسجيل الدخول**: واجهة مصادقة Google OAuth
- **شريط التنقل**: التنقل مع وظائف البحث وقائمة المستخدم
- **البانر الرئيسي**: القسم البطولي مع المحتوى المميز
- **مكون الصف**: صفوف الأفلام القابلة للتمرير الأفقي
- **صفحات تفاصيل الأفلام**: معلومات شاملة عن الأفلام مع المقاطع الدعائية
- **صفحات الممثلين والطاقم**: معلومات الممثلين وأعمالهم السينمائية
- **صفحات المواسم**: تفاصيل مواسم وحلقات المسلسلات

### تكامل بيانات الأفلام

- تكامل TMDB (قاعدة بيانات الأفلام) من أجل:
  - اكتشاف الأفلام والمسلسلات
  - معلومات تفصيلية عن الأفلام
  - وظائف البحث
  - بيانات الممثلين والطاقم
  - المقاطع الدعائية والفيديوهات

### إدارة المستخدمين

- إنشاء وإدارة ملفات المستخدمين
- وظائف قائمة المشاهدة (إضافة/إزالة الأفلام)
- تتبع الممثلين المفضلين
- إدارة حالة المستخدم القائمة على الجلسة

### ميزات واجهة المستخدم

- **التصميم المتجاوب**: محسن للعرض على سطح المكتب والهاتف المحمول
- **موضوع مستوحى من نتفليكس**: خلفية داكنة مع ألوان حمراء مميزة
- **الحركات السلسة**: Framer Motion لانتقالات الصفحات وتأثيرات التحويم
- **العناصر التفاعلية**: المقاطع الدعائية للأفلام ووظائف البحث وتفضيلات المستخدم
- **إمكانية الوصول**: HTML دلالي مناسب ودعم التنقل بلوحة المفاتيح

## تدفق البيانات

1. **بيانات الأفلام**: TMDB API ← مسارات Next.js API ← العرض من جانب الخادم ← عرض العميل
2. **مصادقة المستخدم**: Google OAuth ← NextAuth.js ← إدارة الجلسة
3. **تنقل الصفحات**: التوجيه من جانب العميل مع Next.js Router
4. **المحتوى الديناميكي**: جلب خصائص من جانب الخادم لكل تحميل صفحة

## التبعيات الخارجية

### واجهات برمجة التطبيقات
- **TMDB API**: المصدر الأساسي لبيانات الأفلام والمسلسلات
- **Google OAuth**: مزود المصادقة لإصدار Next.js

### المكتبات الرئيسية
- **الإطار**: Next.js 13 مع TypeScript
- **التصميم**: Tailwind CSS مع موضوع نتفليكس مخصص
- **الحركة**: Framer Motion للانتقالات السلسة
- **المصادقة**: NextAuth.js v4 مع مزود Google
- **الأيقونات**: React Icons لعناصر واجهة المستخدم
- **الوسائط**: React Player لمحتوى الفيديو

### تكامل Firebase
- مصادقة Firebase لإدارة محسنة للمستخدمين
- تكامل Firestore اختياري لتفضيلات المستخدمين وقوائم المشاهدة
- قدرات مزامنة البيانات في الوقت الفعلي

## استراتيجية النشر

### بيئة التطوير
- **خادم تطوير Next.js**: يعمل على المنفذ 5000 مع إعادة التحميل الساخن
- **دعم TypeScript**: فحص كامل للأنواع و IntelliSense
- **التحديث السريع**: ردود فعل فورية أثناء التطوير

### بناء الإنتاج
- **بناء Next.js**: إنتاج ثابت محسن وعرض من جانب الخادم
- **تحسين الأصول**: تحسين تلقائي للصور وتقسيم الكود
- **متغيرات البيئة**: إدارة آمنة لمفاتيح API لـ TMDB والمصادقة

### تحسين المنصة
- تكوينات خاصة بـ Replit للنشر السلس
- إدارة متغيرات البيئة عبر أسرار Replit
- محسن لبيئة تطوير واستضافة Replit

## التغييرات الأخيرة (23 يوليو 2025)

✓ **نقل المشروع**: تم نقل المشروع بنجاح من Replit Agent إلى بيئة Replit
✓ **تثبيت الحزم**: تم تثبيت جميع تبعيات Next.js و React المطلوبة
✓ **تكامل TMDB API**: تم تكوين مفتاح TMDB API بنجاح لجلب بيانات الأفلام
✓ **خادم التطوير**: خادم تطوير Next.js يعمل على المنفذ 5000
✓ **تجاوز المصادقة**: تم إيقاف Google OAuth مؤقتاً للسماح بالوصول المباشر
✓ **تحميل بيانات الأفلام**: الأفلام والمسلسلات تحمل الآن بنجاح من TMDB API
✓ **تكوين البيئة**: إعداد صحيح لـ .env.local مع مفتاح TMDB API
✓ **هيكل المشروع**: تم التحقق من والحفاظ على هيكل Next.js نظيف
✓ **نظام تخزين مؤقت ذكي**: تم تنفيذ نظام تخزين مؤقت ذكي لسرعة التطوير
✓ **تخزين مؤقت واعي بالبيئة**: تخزين مؤقت لا محدود في التطوير، معطل في الإنتاج
✓ **أدوات تحكم وضع التطوير**: أدوات التحكم والتحسينات نشطة فقط أثناء التطوير

## الحالة الحالية

تم نقل نسخة نتفليكس بنجاح وهي تعمل بالكامل مع:
- إعداد كامل لـ Next.js 13 مع TypeScript يعمل على المنفذ 5000
- تكامل TMDB API لبيانات الأفلام الحقيقية (الأفلام تحمل بنجاح)
- واجهة مستوحاة من نتفليكس مع Tailwind CSS
- تصفح الأفلام مع فئات متعددة (الرائجة، الأعلى تقييماً، الأنواع)
- تصميم متجاوب لجميع الأجهزة
- المصادقة متجاوزة مؤقتاً للوصول المباشر
- نظام تخزين مؤقت ذكي بمدة لا محدودة أثناء التطوير
- بيئة تطوير سريعة مع بيانات أفلام مخزنة مؤقتاً

## الخطوات التالية

→ **إعداد Google OAuth**: إعداد بيانات اعتماد Google OAuth عند الحاجة للمصادقة
→ **تحديث مكونات الصور**: تحديث مكونات Next.js Image لإزالة تحذيرات القديمة
→ **تحسين الميزات**: اختبار جميع صفحات تفاصيل الأفلام ومعلومات الممثلين
→ **تحسين الأداء**: تحسين تحميل الصور وإضافة معالجة الأخطاء
→ **إعداد النشر**: جاهز لنشر الإنتاج عند الحاجة

هذا الهيكل يوفر نسخة نتفليكس قوية وقابلة للتوسع مع ممارسات تطوير ويب حديثة وتجربة مستخدم مثالية.